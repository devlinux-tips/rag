# Croatian Language Settings
# Specific configurations for Croatian text processing and generation

[language]
code = "hr"
name = "Croatian"
family = "slavic"

# ============================================================================
# SHARED CROATIAN CONSTANTS
# ============================================================================
[shared]
# Croatian character patterns (used across multiple components)
chars_pattern = "[^\\w\\sčćžšđČĆŽŠĐ.,!?:;()-]"

# Common Croatian settings
response_language = "croatian"
preserve_diacritics = true

# Croatian question patterns (shared across retrieval and prompts)
[shared.question_patterns]
factual = ["tko", "što", "kada", "gdje", "koji", "koja", "koje", "koliko", "koliki"]
explanatory = ["kako", "zašto", "objasni", "razloži"]
comparison = ["razlika", "usporedi", "slično", "različito"]
summarization = ["sažmi", "pregled", "ukratko", "glavno"]

# Croatian stopwords (unified for all processing)
[shared.stopwords]
# Complete Croatian stopword list (used by both text processing and retrieval)
words = [
    # Basic function words
    "i", "u", "na", "za", "se", "je", "da", "su", "od", "do", "po", "sa",
    "te", "ta", "to", "ti", "tu", "iz", "ni", "li", "ga", "mu", "pa", "ne",
    "si", "me", "mi", "ih", "im", "ju", "jo", "ja", "ma", "ah", "oh", "al",
    # Extended stopwords
    "a", "ali", "am", "as", "at", "ba", "be", "bi", "bo", "bu", "by",
    "da", "do", "eh", "el", "en", "es", "et", "ga", "go", "ha", "hi",
    "ho", "ic", "id", "ie", "if", "il", "in", "ir", "is", "it",
    "ka", "ko", "la", "li", "lo", "me", "mi", "mo", "mu", "my",
    "na", "ne", "ni", "no", "nu", "oh", "ok", "ol", "om", "on",
    "oo", "op", "or", "os", "ot", "ov", "pa", "po", "ra", "re",
    "sa", "se", "si", "so", "ta", "te", "ti", "to", "tu", "up",
    "uz", "ve", "za", "ze"
]

# Note: Diacritics detected automatically using Unicode properties
# No language-specific character lists needed

# ============================================================================
# CATEGORIZATION CONFIGURATION
# ============================================================================
[categorization]
# Category indicators for Croatian content
cultural_indicators = ["kultura", "tradicija", "baština", "povijest", "običaji", "hrvatska", "hrvati"]
tourism_indicators = ["turizam", "putovanje", "odmor", "hotel", "plaža", "destinacija"]
technical_indicators = ["tehnologija", "softver", "sustav", "algoritam", "kod", "programiranje"]
legal_indicators = ["zakon", "propis", "sud", "pravni", "ugovor", "advokat"]
business_indicators = ["poslovanje", "tvrtka", "ekonomija", "profit", "trgovina", "tržište"]
educational_indicators = ["učenje", "obrazovanje", "škola", "sveučilište", "studij"]
news_indicators = ["vijesti", "događaji", "trenutno", "izvještaj", "mediji"]
faq_indicators = ["često", "pitanje", "odgovor", "kako", "zašto", "što"]

# Pattern matching for Croatian queries
[patterns]
cultural = [
    "\\b(kultura|tradicija|baština|povijest|običaji)\\b",
    "\\b(festival|umjetnost|muzika|književnost|identitet)\\b",
    "\\b(spomenik|muzej|kulturni|nacionalni)\\b"
]
tourism = [
    "\\b(turizam|putovanje|odmor|hotel|smještaj)\\b",
    "\\b(destinacija|atrakcija|plaža|restoran|karta)\\b",
    "\\b(vodič|rezervacija|cijena|sezona|turist)\\b"
]
technical = [
    "\\b(tehnologija|softver|programiranje|kod|algoritam)\\b",
    "\\b(sustav|baza|API|okvir|razvoj)\\b",
    "\\b(testiranje|implementacija|verzija|ažuriranje)\\b"
]
legal = [
    "\\b(zakon|propis|sud|pravni|odvjetnik)\\b",
    "\\b(ugovor|licenca|prekršaj|kazna|postupak)\\b",
    "\\b(vlasništvo|autorsko|patent|intelektualno)\\b"
]
business = [
    "\\b(poslovanje|tvrtka|ekonomija|profit|trgovina)\\b",
    "\\b(tržište|prodaja|marketing|investicija|prihod)\\b",
    "\\b(proračun|financije|porez|izvoz|uvoz)\\b"
]
faq = [
    "\\b(često|pitanje|odgovor|kako|zašto|što)\\b",
    "\\b(objašnjenje|uputa|pomoć|savjet|vodič)\\b",
    "^(što|kako|zašto|gdje|kada|tko)\\s+"
]
educational = [
    "\\b(učenje|obrazovanje|tečaj|škola|sveučilište)\\b",
    "\\b(studij|ispit|diploma|certifikat|akademski)\\b",
    "\\b(vodič|lekcija|vježba|zadatak)\\b"
]
news = [
    "\\b(vijesti|događaji|aktualno|najnovije|izvještaj)\\b",
    "\\b(članak|priča|intervju|objava)\\b",
    "\\b(danas|jučer|nedavno|najnovije|sada)\\b"
]

# Suggestions for Croatian users
[suggestions]
low_confidence = [
    "Dodajte više specifičnih pojmova za bolju kategorizaciju",
    "Koristite ključne riječi vezane uz vašu temu"
]
general_category = [
    "Budite specifičniji - spomenite temu (kultura, turizam, tehnologija, itd.)"
]
faq_optimization = [
    "Za često postavljana pitanja koristite upitne riječi: 'što', 'kako', 'zašto'"
]
more_keywords = ["Dodajte više ključnih riječi za bolju pretragu"]
expand_query = ["Proširite upit s više detalja"]
be_specific = ["Budite specifičniji - koristite 'što', 'kako', 'gdje', itd."]
try_synonyms = ["Probajte koristiti sinonime za bolje rezultate"]
add_context = ["Dodajte kontekst (grad, tema, vremenski period)"]

# Language indicators for Croatian
[language_indicators]
indicators = ["č", "ć", "š", "ž", "đ"]

# Topic filters for Croatian queries
[topic_filters]
history = ["\\b(povijest|historij|stari|drevni)\\b"]
tourism = ["\\b(turizam|putovanje|odmor|plaža)\\b"]
nature = ["\\b(priroda|park|nacionalni|šuma|planine)\\b"]
food = ["\\b(hrana|jelo|kuhinja|restoran)\\b"]
sports = ["\\b(sport|nogomet|košarka|tenis)\\b"]

# Query type matching patterns for ranking
[ranking_patterns]
factual = [
    "\\b(broj|količina|datum|godine?|kad[ae]?|gdje|tko)\\b",
    "\\b(\\d{4}\\.?\\s*god|\\d+\\s*%|\\d+\\s*km)\\b"
]
explanatory = [
    "\\b(zato što|zbog toga|objašnjenje|razlog)\\b",
    "\\b(proces|postupak|način|metod[ae])\\b"
]
comparison = [
    "\\b(za razliku od|s druge strane|bolje|gore)\\b",
    "\\b(usporedba|razlika|sličnost|nasuprot)\\b"
]
summarization = [
    "\\b(ukratko|sažeto|glavne točke|pregled)\\b",
    "\\b(ukupno|općenito|sveukupno)\\b"
]
structural_indicators = [
    "prvo|drugo|treće"
]

# ============================================================================
# TEXT PROCESSING
# ============================================================================
[text_processing]
# Croatian-specific text preprocessing settings
remove_diacritics = false  # Keep Croatian diacritics (š, ć, č, ž, đ)
normalize_case = true
# Note: Uppercase chars derived programmatically from lowercase_special

# Word character pattern for Croatian (includes Croatian diacritics)
word_char_pattern = "[a-zA-ZčćšžđĆČŠŽĐ]"

# Croatian diacritic mapping (for normalization when needed)
[text_processing.diacritic_map]
"č" = "c"
"ć" = "c"
"š" = "s"
"ž" = "z"
"đ" = "d"

# Locale settings for Croatian
[text_processing.locale]
primary = "hr_HR.UTF-8"
fallback = "C.UTF-8"

# Text file encoding support for Croatian documents
text_encodings = ["utf-8", "cp1252", "iso-8859-2"]

# ============================================================================
# DOCUMENT PROCESSING
# ============================================================================

# Text cleaning configuration for Croatian
[text_cleaning]
# General cleaning settings
multiple_whitespace = true
multiple_linebreaks = true
min_meaningful_words = 3
min_word_char_ratio = 0.6

# ============================================================================
[chunking]
# Croatian sentence and paragraph detection
# Note: paragraph_separators, min_sentence_length inherited from config.toml [chunking] section
sentence_endings = [".", "!", "?", "…"]
abbreviations = ["npr.", "itd.", "tj.", "dr.", "prof.", "mr.", "mag.", "ing."]

# Croatian-specific sentence extraction pattern
sentence_ending_pattern = "[.!?]+(?=\\s+[A-ZČĆŽŠĐ]|\\s*$)"

[document_cleaning]
# Croatian document cleaning patterns
header_footer_patterns = [
    "^\\s*\\d+\\s*$",                    # Standalone page numbers
    "^\\s*STRANICA\\s*\\d+.*$",          # Croatian "PAGE X"
    "^\\s*BROJ\\s*\\d+.*ZAGREB.*$",      # Document headers
    "^\\s*NARODNE\\s*NOVINE.*$",         # Croatian Official Gazette header
    "^\\s*SLUŽBENI\\s*LIST.*$"           # Official list header
]

# OCR error corrections - generic behavior control only
[document_cleaning.ocr_corrections]
fix_spaced_capitals = true       # Generic: Fix any spaced capital letters
fix_spaced_punctuation = true    # Generic: Fix spaced punctuation marks
fix_common_ocr_errors = true     # Generic: Fix rn->m, vv->w, etc.

# ============================================================================
# EMBEDDINGS & VECTOR DATABASE
# ============================================================================
[embeddings]
# Croatian language embeddings configuration
# Using Croatian-optimized ELECTRA model for best Croatian performance
model_name = "classla/bcms-bertic"  # Croatian-specific ELECTRA model (better than BGE-M3 for Croatian)
supports_multilingual = false       # Croatian-specific model
language_optimized = true          # Optimized specifically for Croatian
fallback_model = "BAAI/bge-m3"     # Multilingual fallback if Croatian model unavailable
# Note: device, batch_size, etc. inherited from config.toml [embeddings] section

[vectordb]
# Croatian-specific vector database settings
collection_name = "croatian_documents"

# Croatian text processing for embeddings
[vectordb.embeddings]
# Note: Core multilingual models available from config.toml [embeddings.recommended_models]
# Available: bge_m3, labse, multilingual_minilm, multilingual_mpnet, distiluse_multilingual
compatible_models = ["bge_m3", "labse", "multilingual_minilm", "multilingual_mpnet"]

# Croatian document metadata
[vectordb.metadata]
content_indicators = ["čćžšđ", "ČĆŽŠĐ", "Croatian", "Hrvatski"]

# Search optimization for Croatian
[vectordb.search]
query_expansion = true
preserve_case_sensitivity = false  # Croatian is case-insensitive for search
boost_title_matches = true

# ============================================================================
# RETRIEVAL & QUERY PROCESSING
# ============================================================================
[retrieval]
# Croatian synonyms for query expansion
# Synonym expansion handled by BGE-M3 semantic similarity, not config hardcoding
# Morphological analysis handled by CLASSLA library, not config hardcoding

# ============================================================================
# GENERATION & PROMPTS
# ============================================================================
[generation]
# Croatian text generation settings
system_prompt_language = "croatian"
formality_level = "polite"  # Croatian cultural norm

[prompts]
# Croatian system prompts and templates
system_base = "Ti si AI asistent koji pomaže s analitom dokumenata na hrvatskom jeziku."
context_intro = "Na temelju sljedećeg konteksta:"
answer_intro = "Odgovor:"
no_context_response = "Nema dovoljno informacija u kontekstu za odgovaranje na to pitanje."
error_message_template = "Greška u generiranju odgovora: {error}"

# Prompt formatting templates
chunk_header_template = "Dokument {index}:"
context_separator = "\n\n"

# Base system prompt for all generation
base_system_prompt = """Ti si precizan i stručan asistent koji odgovara na hrvatskom jeziku koristeći isključivo dane podatke.
Tvoja uloga je dati točne, relevatne i potpune odgovore na temelju konteksta.
Ako informacije nisu dostupne u kontekstu, jasno reci da ne znaš."""

question_answering_system = """Ti si pomoćni asistent koji odgovara na hrvatskom jeziku.
Koristi dane kontekstne informacije da daš precizan i jasan odgovor.
Ako informacije nisu dovoljne, reci da ne možeš dati potpun odgovor."""
question_answering_user = "Pitanje: {query}\n\nDaj mi detaljan odgovor:"
question_answering_context = "Kontekstualne informacije:\n{context}\n\n"

summarization_system = """Ti si stručnjak za sažimanje tekstova na hrvatskom jeziku.
Napravi koncizan ali informativan sažetak koji zadržava ključne informacije.
Koristi samo informacije iz danog konteksta."""
summarization_user = "Zahtjev za sažetak: {query}\n\nSažetak:"
summarization_context = "Tekst za sažimanje:\n{context}\n\n"

factual_qa_system = """Ti si faktograf koji odgovara na hrvatskom jeziku koristeći samo činjenice iz danog konteksta.
Daj precizne, faktičke odgovore. Ako točne informacije nisu dostupne, jasno to naznači."""
factual_qa_user = "Faktičko pitanje: {query}\n\nFaktični odgovor:"
factual_qa_context = "Relevantne činjenice:\n{context}\n\n"

explanatory_system = """Ti si edukator koji objašnjava koncepte na hrvatskom jeziku.
Koristi kontekst da daš jasno, strukturirano objašnjenje prilagođeno upitu.
Rastavi složene pojmove na razumljive dijelove."""
explanatory_user = "Objašnjenje potrebno za: {query}\n\nDetaljno objašnjenje:"
explanatory_context = "Informacije za objašnjenje:\n{context}\n\n"

comparison_system = """Ti si analitičar koji poredi različite aspekte na hrvatskom jeziku.
Koristi kontekst da istakneš sličnosti, razlike i ključne karakteristike.
Budi objektivan i oslanjaj se samo na dane informacije."""
comparison_user = "Usporedba potrebna za: {query}\n\nAnalitička usporedba:"
comparison_context = "Podaci za usporedbu:\n{context}\n\n"

# Note: Cultural context handled automatically by language-specific prompts

tourism_system = """Ti si turistički vodič za Hrvatsku koji odgovara na hrvatskom jeziku.
Koristi kontekst da daš praktičan i informativan odgovor o hrvatskim odredištima.
Fokusiraj se na korisne informacije za posjetitelje i ističi posebne značajke."""
tourism_user = "Turističko pitanje: {query}\n\nTuristički odgovor:"
tourism_context = "Turističke informacije:\n{context}\n\n"

business_system = """Ti si poslovni konzultant koji odgovara na hrvatskom jeziku.
Koristi kontekst da daš praktičan i informativan odgovor o poslovnim pitanjima.
Fokusiraj se na korisne informacije za stručnjake i ističi ključne poslovne uvide."""
business_user = "Poslovno pitanje: {query}\n\nPoslovan odgovor:"
business_context = "Poslovne informacije:\n{context}\n\n"

# Croatian keywords for prompt template selection
[prompts.keywords]
# Keywords for system prompt selection - Croatian
tourism = ["turizam", "putovanje", "odmor", "destinacija", "atrakcija", "smještaj", "hoteli", "plaža", "park", "nacionalni", "grad"]
comparison = ["usporedi", "razlika", "sličnost", "bolje", "gore", "različit", "jednak", "poredi", "nasuprot"]
explanation = ["objasni", "zašto", "kako", "što znači", "značenje", "razlog", "uzrok", "način", "process", "postupak"]
factual = ["broj", "količina", "datum", "godina", "kad", "gdje", "tko", "koliko", "kada", "koji", "koja", "koje"]
summary = ["sažmi", "sažetak", "ukratko", "glavno", "ključno", "rezime", "sumarno", "pregled"]
business = ["poslovanje", "tvrtka", "ekonomija", "profit", "trgovina", "tržište", "prodaja", "marketing", "investicija", "prihod"]

[prompts.formal]
# Croatian formal style prompts
formal_instruction = "Odgovaraj uvijek u formalnom stilu."
# Note: Cultural awareness built into language-specific templates

# ============================================================================
# RESPONSE PROCESSING & CONFIDENCE
# ============================================================================
[confidence]
# Croatian-specific confidence calculation settings
error_phrases = ["greška", "error", "ne znam", "ne mogu", "sorry", "žao mi je", "nažalost"]
positive_indicators = ["poznato", "sigurno", "jasno", "definitivo", "potvrđeno"]
confidence_threshold = 0.5

# Croatian response parsing patterns
[response_parsing]
# Croatian language patterns for response analysis
no_answer_patterns = ["ne znam", "ne mogu", "nema podataka", "nisam siguran"]
source_patterns = ["izvor:", "prema:", "dokumentu:", "prema dokumentu"]

# Confidence indicators
[response_parsing.confidence_indicators]
high = ["jasno", "sigurno", "definitivno", "nedvojbeno"]
medium = ["vjerojatno", "moguće", "čini se", "izgleda"]
low = ["možda", "nije jasno", "teško reći", "ne mogu biti siguran"]

# Display configuration
[response_parsing.display]
no_answer_message = "Žao mi je, ne mogu pronaći odgovor na vaše pitanje u dostupnim dokumentima."
high_confidence_label = "Visoka pouzdanost"
medium_confidence_label = "Srednja pouzdanost"
low_confidence_label = "Niska pouzdanost"
sources_prefix = "Izvori"

# Text cleaning configuration
[response_parsing.cleaning]
prefixes_to_remove = ["^(odgovor|answer):", "^(rezultat|result):", "^(tekst|text):"]

# Language detection patterns
# Language detection handled by langdetect library, not word lists

# ============================================================================
# PIPELINE CONFIGURATION
# ============================================================================
[pipeline]
# Croatian-specific pipeline settings
enable_morphological_expansion = true
enable_synonym_expansion = true
use_language_query_processing = true
language_priority = true

# Croatian preprocessing settings
[pipeline.processing]
preserve_diacritics = true
preserve_formatting = true           # Added from en.toml
respect_grammar = true
enable_sentence_boundary_detection = true
specific_chunking = true

# Croatian generation settings - OPTIMIZED FOR SPEED
[pipeline.generation]
prefer_formal_style = false          # Disabled for speed
formality_level = "casual"           # Changed from "polite" for speed

# Croatian retrieval settings
[pipeline.retrieval]
use_stop_words = true
enable_morphological_matching = true
cultural_relevance_boost = 1.2
regional_content_preference = "croatia"

# Croatian-specific ranking patterns
[ranking]

# Croatian language-specific ranking features for calculate_language_relevance_score
# Croatian language-specific ranking features for calculate_language_relevance_score
[ranking.language_features]

# Character-based scoring (Croatian diacritics)
[ranking.language_features.special_characters]
enabled = true
characters = ["č", "ć", "š", "ž", "đ"]
max_score = 0.3
density_factor = 1000

# Important Croatian vocabulary
[ranking.language_features.importance_words]
enabled = true
words = [
    "zagreb", "hrvatska", "dubrovnik", "split", "rijeka", "pula", "zadar",
    "važan", "značajan", "poznati", "tradicionalni", "historijski",
    "kulturni", "nacionalni", "hrvatski", "europski", "mediteranski"
]
max_score = 0.4
word_boost = 0.1

# Croatian cultural/geographic patterns
[ranking.language_features.cultural_patterns]
enabled = true
patterns = [
    "\\b(biser jadrana|perla jadrana)\\b",
    "\\b(hrvatski?\\w* kralj|hrvatska povijest)\\b",
    "\\b(adriatic|jadransko more)\\b",
    "\\b(unesco|svjetska baština)\\b",
    "\\b(plitvice|kornati|mljet|krka|paklenica)\\b",
    "\\b(istria|istra|dalmacija|slavonija|primorje|lika)\\b",
    "\\b(austro.?ugarska|jugoslavija|domovinski rat)\\b"
]
max_score = 0.2
pattern_boost = 0.1

# Croatian morphology/grammar patterns
[ranking.language_features.grammar_patterns]
enabled = true
patterns = [
    "\\b\\w+ić\\b",      # Croatian surnames (Petrić, Marić, Božić)
    "\\b\\w+ović\\b",    # Patronymic surnames (Petrović, Janković, Nikolić)
    "\\b\\w+ski\\b",     # Adjective endings (hrvatski, europski, gradski)
    "\\b\\w+nja\\b",     # Noun endings (pitanja, objašnjenja, iskanja)
    "\\b\\w+ost\\b",     # Abstract nouns (važnost, mogućnost, stvarnost)
    "\\b\\w+stvo\\b"     # Collective nouns (gospodarstvo, društvo, bratstvo)
]
max_score = 0.1
density_factor = 10

# Croatian capitalization patterns
[ranking.language_features.capitalization]
enabled = true
proper_nouns = [
    "Zagreb", "Hrvatska", "Dubrovnik", "Split", "Rijeka", "Pula", "Zadar",
    "Istra", "Dalmacija", "Slavonija", "Hrvatsko", "Hrvatski", "Europska"
]
max_score = 0.15
capitalization_boost = 0.05

# Croatian vocabulary patterns
[ranking.language_features.vocabulary_patterns]
enabled = true
patterns = [
    "\\b(što|tko|kada|gdje|kako|zašto|koji|koja|koje|koliko)\\b",
    "\\b(hrvatska|croatia|zagreb|split|dubrovnik|rijeka)\\b",
    "\\b(kultura|povijest|tradicija|jezik|narod|vjera)\\b",
    "\\b(turizam|gospodarstvo|politika|obrazovanje)\\b"
]
max_score = 0.1
pattern_boost = 0.02
